(()=>{var e,t,n={260:e=>{"use strict";function t(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}t.proto=function(){return RegExp.escape=t,t},e.exports=t},735:e=>{e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],i=e[1],s=e[2],a=e[3];i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&s|~i&a)+t[0]-680876936|0)<<7|n>>>25)+i|0)&i|~n&s)+t[1]-389564586|0)<<12|a>>>20)+n|0)&n|~a&i)+t[2]+606105819|0)<<17|s>>>15)+a|0)&a|~s&n)+t[3]-1044525330|0)<<22|i>>>10)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&s|~i&a)+t[4]-176418897|0)<<7|n>>>25)+i|0)&i|~n&s)+t[5]+1200080426|0)<<12|a>>>20)+n|0)&n|~a&i)+t[6]-1473231341|0)<<17|s>>>15)+a|0)&a|~s&n)+t[7]-45705983|0)<<22|i>>>10)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&s|~i&a)+t[8]+1770035416|0)<<7|n>>>25)+i|0)&i|~n&s)+t[9]-1958414417|0)<<12|a>>>20)+n|0)&n|~a&i)+t[10]-42063|0)<<17|s>>>15)+a|0)&a|~s&n)+t[11]-1990404162|0)<<22|i>>>10)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&s|~i&a)+t[12]+1804603682|0)<<7|n>>>25)+i|0)&i|~n&s)+t[13]-40341101|0)<<12|a>>>20)+n|0)&n|~a&i)+t[14]-1502002290|0)<<17|s>>>15)+a|0)&a|~s&n)+t[15]+1236535329|0)<<22|i>>>10)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&a|s&~a)+t[1]-165796510|0)<<5|n>>>27)+i|0)&s|i&~s)+t[6]-1069501632|0)<<9|a>>>23)+n|0)&i|n&~i)+t[11]+643717713|0)<<14|s>>>18)+a|0)&n|a&~n)+t[0]-373897302|0)<<20|i>>>12)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&a|s&~a)+t[5]-701558691|0)<<5|n>>>27)+i|0)&s|i&~s)+t[10]+38016083|0)<<9|a>>>23)+n|0)&i|n&~i)+t[15]-660478335|0)<<14|s>>>18)+a|0)&n|a&~n)+t[4]-405537848|0)<<20|i>>>12)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&a|s&~a)+t[9]+568446438|0)<<5|n>>>27)+i|0)&s|i&~s)+t[14]-1019803690|0)<<9|a>>>23)+n|0)&i|n&~i)+t[3]-187363961|0)<<14|s>>>18)+a|0)&n|a&~n)+t[8]+1163531501|0)<<20|i>>>12)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i&a|s&~a)+t[13]-1444681467|0)<<5|n>>>27)+i|0)&s|i&~s)+t[2]-51403784|0)<<9|a>>>23)+n|0)&i|n&~i)+t[7]+1735328473|0)<<14|s>>>18)+a|0)&n|a&~n)+t[12]-1926607734|0)<<20|i>>>12)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i^s^a)+t[5]-378558|0)<<4|n>>>28)+i|0)^i^s)+t[8]-2022574463|0)<<11|a>>>21)+n|0)^n^i)+t[11]+1839030562|0)<<16|s>>>16)+a|0)^a^n)+t[14]-35309556|0)<<23|i>>>9)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i^s^a)+t[1]-1530992060|0)<<4|n>>>28)+i|0)^i^s)+t[4]+1272893353|0)<<11|a>>>21)+n|0)^n^i)+t[7]-155497632|0)<<16|s>>>16)+a|0)^a^n)+t[10]-1094730640|0)<<23|i>>>9)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i^s^a)+t[13]+681279174|0)<<4|n>>>28)+i|0)^i^s)+t[0]-358537222|0)<<11|a>>>21)+n|0)^n^i)+t[3]-722521979|0)<<16|s>>>16)+a|0)^a^n)+t[6]+76029189|0)<<23|i>>>9)+s|0,i=((i+=((s=((s+=((a=((a+=((n=((n+=(i^s^a)+t[9]-640364487|0)<<4|n>>>28)+i|0)^i^s)+t[12]-421815835|0)<<11|a>>>21)+n|0)^n^i)+t[15]+530742520|0)<<16|s>>>16)+a|0)^a^n)+t[2]-995338651|0)<<23|i>>>9)+s|0,i=((i+=((a=((a+=(i^((n=((n+=(s^(i|~a))+t[0]-198630844|0)<<6|n>>>26)+i|0)|~s))+t[7]+1126891415|0)<<10|a>>>22)+n|0)^((s=((s+=(n^(a|~i))+t[14]-1416354905|0)<<15|s>>>17)+a|0)|~n))+t[5]-57434055|0)<<21|i>>>11)+s|0,i=((i+=((a=((a+=(i^((n=((n+=(s^(i|~a))+t[12]+1700485571|0)<<6|n>>>26)+i|0)|~s))+t[3]-1894986606|0)<<10|a>>>22)+n|0)^((s=((s+=(n^(a|~i))+t[10]-1051523|0)<<15|s>>>17)+a|0)|~n))+t[1]-2054922799|0)<<21|i>>>11)+s|0,i=((i+=((a=((a+=(i^((n=((n+=(s^(i|~a))+t[8]+1873313359|0)<<6|n>>>26)+i|0)|~s))+t[15]-30611744|0)<<10|a>>>22)+n|0)^((s=((s+=(n^(a|~i))+t[6]-1560198380|0)<<15|s>>>17)+a|0)|~n))+t[13]+1309151649|0)<<21|i>>>11)+s|0,i=((i+=((a=((a+=(i^((n=((n+=(s^(i|~a))+t[4]-145523070|0)<<6|n>>>26)+i|0)|~s))+t[11]-1120210379|0)<<10|a>>>22)+n|0)^((s=((s+=(n^(a|~i))+t[2]+718787259|0)<<15|s>>>17)+a|0)|~n))+t[9]-343485551|0)<<21|i>>>11)+s|0,e[0]=n+e[0]|0,e[1]=i+e[1]|0,e[2]=s+e[2]|0,e[3]=a+e[3]|0}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function s(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function a(e){var t,s,a,r,o,l,u=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(c,i(e.substring(t-64,t)));for(s=(e=e.substring(t-64)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<s;t+=1)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(n(c,a),t=0;t<16;t+=1)a[t]=0;return r=(r=8*u).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),l=parseInt(r[1],16)||0,a[14]=o,a[15]=l,n(c,a),c}function r(e){var t,i,a,r,o,l,u=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(c,s(e.subarray(t-64,t)));for(i=(e=t-64<u?e.subarray(t-64):new Uint8Array(0)).length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)a[t>>2]|=e[t]<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(n(c,a),t=0;t<16;t+=1)a[t]=0;return r=(r=8*u).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),l=parseInt(r[1],16)||0,a[14]=o,a[15]=l,n(c,a),c}function o(e){var n,i="";for(n=0;n<4;n+=1)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}function l(e){var t;for(t=0;t<e.length;t+=1)e[t]=o(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e,t){var n,i=e.length,s=new ArrayBuffer(i),a=new Uint8Array(s);for(n=0;n<i;n+=1)a[n]=e.charCodeAt(n);return t?a:s}function h(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e,t,n){var i=new Uint8Array(e.byteLength+t.byteLength);return i.set(new Uint8Array(e)),i.set(new Uint8Array(t),e.byteLength),n?i:i.buffer}function g(e){var t,n=[],i=e.length;for(t=0;t<i-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function f(){this.reset()}return l(a("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,i){var s,a,r,o,l=this.byteLength,u=t(n,l),c=l;return i!==e&&(c=t(i,l)),u>c?new ArrayBuffer(0):(s=c-u,a=new ArrayBuffer(s),r=new Uint8Array(a),o=new Uint8Array(this,u,s),r.set(o),a)}}(),f.prototype.append=function(e){return this.appendBinary(u(e)),this},f.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,s=this._buff.length;for(t=64;t<=s;t+=64)n(this._hash,i(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},f.prototype.end=function(e){var t,n,i=this._buff,s=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)a[t>>2]|=i.charCodeAt(t)<<(t%4<<3);return this._finish(a,s),n=l(this._hash),e&&(n=g(n)),this.reset(),n},f.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},f.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},f.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},f.prototype._finish=function(e,t){var i,s,a,r=t;if(e[r>>2]|=128<<(r%4<<3),r>55)for(n(this._hash,e),r=0;r<16;r+=1)e[r]=0;i=(i=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(i[2],16),a=parseInt(i[1],16)||0,e[14]=s,e[15]=a,n(this._hash,e)},f.hash=function(e,t){return f.hashBinary(u(e),t)},f.hashBinary=function(e,t){var n=l(a(e));return t?g(n):n},f.ArrayBuffer=function(){this.reset()},f.ArrayBuffer.prototype.append=function(e){var t,i=d(this._buff.buffer,e,!0),a=i.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)n(this._hash,s(i.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(i.buffer.slice(t-64)):new Uint8Array(0),this},f.ArrayBuffer.prototype.end=function(e){var t,n,i=this._buff,s=i.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s;t+=1)a[t>>2]|=i[t]<<(t%4<<3);return this._finish(a,s),n=l(this._hash),e&&(n=g(n)),this.reset(),n},f.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},f.ArrayBuffer.prototype.getState=function(){var e=f.prototype.getState.call(this);return e.buff=h(e.buff),e},f.ArrayBuffer.prototype.setState=function(e){return e.buff=c(e.buff,!0),f.prototype.setState.call(this,e)},f.ArrayBuffer.prototype.destroy=f.prototype.destroy,f.ArrayBuffer.prototype._finish=f.prototype._finish,f.ArrayBuffer.hash=function(e,t){var n=l(r(new Uint8Array(e)));return t?g(n):n},f}()}},i={};function s(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}};return n[e](a,a.exports,s),a.exports}s.m=n,s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>"js/"+e+".bundle.js",s.miniCssF=e=>"css/front.bundle.css",s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="wordpress-plugin:",s.l=(n,i,a,r)=>{if(e[n])e[n].push(i);else{var o,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+a){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",t+a),o.src=n),e[n]=[i];var d=(t,i)=>{o.onerror=o.onload=null,clearTimeout(g);var s=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(i))),t)return t(i)},g=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e+"../"})(),(()=>{var e={440:0};s.f.j=(t,n)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var a=new Promise(((n,s)=>i=e[t]=[n,s]));n.push(i[2]=a);var r=s.p+s.u(t),o=new Error;s.l(r,(n=>{if(s.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",o.name="ChunkLoadError",o.type=a,o.request=r,i[1](o)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,a,[r,o,l]=n,u=0;if(r.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(l)l(s)}for(t&&t(n);u<r.length;u++)a=r[u],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunkwordpress_plugin=self.webpackChunkwordpress_plugin||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";let e=!1;try{crypto.randomUUID(),e=!0}catch(e){console.warn("Linguise: crypto.randomUUID is not available, using unsafe UUID generator")}const t=["SCRIPT","NOSCRIPT","HEAD","META","STYLE","IFRAME","OBJECT","SELECT","AREA","AUDIO","SVG","MATH","CANVAS","MAP","AUDIO","TRACK","VIDEO"],n=[...t,"TEXTAREA","INPUT"],i={IMG:["alt","title","src"],A:["href"],INPUT:["placeholder"],TEXTAREA:["placeholder"]};function a(){return e?crypto.randomUUID():function(){let e=(new Date).getTime(),t="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var i=16*Math.random();return e>0?(i=(e+i)%16|0,e=Math.floor(e/16)):(i=(t+i)%16|0,t=Math.floor(t/16)),("x"===n?i:3&i|8).toString(16)}))}()}function r(e,t){let n=null;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{e(...i)}),t)}}const o="v4.1",l="_linguise_ttl",u="linguiseDynamicCache";function c(e){return Math.floor(((new Date).getTime()+e)/1e3)}function h(e,t){return t?`${t}::${e}`:e}const d=new class{constructor(){this.caches={},this.global_ttl=void 0,this.MAX_TTL_TIME=2592e5,this.saveToStorageDebounced=r(this.saveToStorage.bind(this),300),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&this.saveToStorage()}))}importFromStorage(){const e=localStorage.getItem(u);if(!e)return;const t=JSON.parse(e);t.version===o&&(this.caches=t.caches,this.global_ttl=Number(t[l]),this.updateTTL())}updateTTL(){const e=Math.floor((new Date).getTime()/1e3);if(isNaN(this.global_ttl))return this.global_ttl=c(this.MAX_TTL_TIME),void this.saveToStorageDebounced();e>this.global_ttl&&(this.caches={}),this.global_ttl=c(this.MAX_TTL_TIME),this.saveToStorageDebounced()}setMaxTTL(e){this.MAX_TTL_TIME=e,this.updateTTL()}add(e,t,n,i){if(!n)throw new Error("Language is required");this.updateTTL(),this.caches[n]=this.caches[n]||{};const s=h(e,i);this.caches[n][s]?(this.caches[n][s].value=t,this.caches[n][s].ttl=c(this.MAX_TTL_TIME)):this.caches[n][s]={value:t,ttl:c(this.MAX_TTL_TIME)},this.saveToStorageDebounced()}get(e,t,n){if(!t)throw new Error("Language is required");const i=(new Date).getTime();if(1e3*this.global_ttl<i)return void this.flush();this.caches[t]=this.caches[t]||{};const s=h(e,n),a=this.caches[t][s];if(a){if(!(1e3*a.ttl<i))return this.caches[t][s].ttl=Math.floor((i+this.MAX_TTL_TIME)/1e3),this.updateTTL(),a.value;try{delete this.caches[t][s]}catch{}this.updateTTL()}}saveToStorage(){localStorage.setItem(u,JSON.stringify({version:o,caches:this.caches,[l]:this.global_ttl}))}flush(){this.caches={},this.updateTTL()}},g=d;window.globalLinguiseCache=d;class f{constructor(e,t,n,i={}){this.id=e?e.id:"noop",this.index=t,this.text=n,this.metaExtra=i,this.editorMeta=null,this.node=e,this.subId=null,this.tagName=null}isCached(){return this.node.cachedIndex.includes(this.index)}asHtml(){if(this.isCached())return;const e=this.tagName?this.tagName:this.node?this.node.tagWrapper:"div",t=["linguiseId","linguiseIndex","linguiseSubId","linguiseMetaExtra"],n=document.createElement("div"),i=document.createElement(e);i.dataset.linguiseId=this.id,i.dataset.linguiseIndex=this.index.toString(),this.subId&&(i.dataset.linguiseSubId=this.subId);const s=[];if(this.metaExtra)for(const[e,t]of Object.entries(this.metaExtra))i[e]=t,s.push(e);if(s.length>0&&(i.dataset.linguiseMetaExtra=s.join(";;")),this.node){let e=(this.node.element.nodeType===Node.TEXT_NODE?this.node.element.parentElement:this.node.element.attributes).className||"";const n=this.node.extraMetadata.class||[];if(n.length>0){const t=n.filter((e=>""!==e.trim()));e+=` ${Array.from(new Set(t)).join(" ")}`}if(i.className=e,this.node.extraMetadata.id&&(i.id=this.node.extraMetadata.id),this.node.extraMetadata.dataset){const e=new Set;for(const n of Object.keys(this.node.extraMetadata.dataset)){if(e.has(n))continue;if(-1!==t.indexOf(n))continue;const s=this.node.extraMetadata.dataset[n];e.add(n),i.dataset[n]=s}}}return i.textContent=this.text||"",n.appendChild(i),n.innerHTML}static fromElement(e){const t=e.querySelector('span[data-editor="linguise"]');let n=e;t&&(n=t);const i=e.dataset.linguiseId;let s=e.dataset.linguiseIndex;if(!i||!s)return;if(s=parseInt(s),isNaN(s))return;const a={};if(e.dataset.linguiseMetaExtra){const t=e.dataset.linguiseMetaExtra.split(";;");for(const n of t)a[n]=e.getAttribute(n)}const r=new f(null,s,n.textContent,a);r.id=i;const o=e.dataset.linguiseSubId;if(o&&(r.subId=o),e.dataset&&"linguise"===e.dataset.editor){const t=e.dataset.linguiseHash,n=e.dataset.linguiseType,i=e.dataset.linguiseAltHash;r.editorMeta={hash:t,type:n,altHash:i}}if(t&&t.dataset&&"linguise"===t.dataset.editor){const e=t.dataset.linguiseHash;r.editorMeta={hash:e}}return r}}const p=f;const _=class{constructor(e,t){this.id=a(),this.element=e,this.parentElement=t||e,this._cachedTokenized=void 0,this.cachedIndex=[],this._blurred=!1,this.tagWrapper="div",this.extraMetadata={},this.mergeable=!1}shouldWeTranslate(e){const t=e.trim();return""!==t&&(!/^\d+(?:[,.]\d+)*$/.test(t)&&!/^[^a-zA-Z\p{L}]*$/u.test(t))}tokenize(e=!1){if(void 0!==this._cachedTokenized&&!e)return this._cachedTokenized;if(this.element.nodeType===Node.TEXT_NODE){const t=Array.from(this.parentElement.childNodes).indexOf(this.element);if(-1===t)throw new Error("can't find index of text node");if(!this.shouldWeTranslate(this.element.textContent))return[];const n=[new p(this,t,this.element.textContent)];return e||(this._cachedTokenized=n),n}let t=[];for(let e=0;e<this.element.childNodes.length;e++){const n=this.element.childNodes[e];if(n.nodeType===Node.TEXT_NODE){if(!this.shouldWeTranslate(n.textContent))continue;t.push(new p(this,e,n.textContent))}}return e||(this._cachedTokenized=t),t}asHtml(){const e=this.tokenize();if(!e.length)return;let t=[];for(let n=0;n<e.length;n++){const i=e[n].asHtml();i&&t.push(i)}return t.length?t.join(""):void 0}applyAttributeChange(e,t,n){let i=this.element;i.nodeType===Node.TEXT_NODE&&(i=this.parentElement);const s=i.getAttribute(e);n.dryRun&&(t="href"===e?`${s}#linguise-translated-demo`:`${s} (translated)`),i.setAttribute(e,t),n.skipCache||n.dryRun||g.add(s,t,n.language,n.subId||e)}bindEditor(e){window._linguiseEditor&&window._linguiseEditor.attach(e)}unbindEditor(e){window._linguiseEditor&&window._linguiseEditor.detach(e)}attachEditor(e){const t=this.element.nodeType===Node.TEXT_NODE?this.parentElement:this.element;e.editorMeta&&t&&(t.setAttribute("data-editor","linguise"),t.setAttribute("data-linguise-hash",e.editorMeta.hash),t.setAttribute("data-linguise-type",e.editorMeta.type),e.editorMeta.altHash&&t.setAttribute("data-linguise-alt-hash",e.editorMeta.altHash),this.bindEditor(t))}detachEditor(){const e=this.element.nodeType===Node.TEXT_NODE?this.parentElement:this.element;e&&(this.element.nodeType===Node.TEXT_NODE&&"linguise"===e.getAttribute("data-editor")&&e.setAttribute("data-linguise-was-edit","1"),e.removeAttribute("data-editor"),e.removeAttribute("data-linguise-hash"),e.removeAttribute("data-linguise-type"),e.removeAttribute("data-linguise-alt-hash"),this.unbindEditor(e))}applyChange(e,t,n){const i=Object.assign({},{dryRun:!1,skipCache:!1},n||{});if(i.skipCache||this.cachedIndex.push(e.index),this.element.nodeType===Node.TEXT_NODE)if(i.dryRun){const t=this.element.textContent.match(/\s*$/)[0];this.element.textContent=e.text+" (translated)"+t}else if(i.skipCache||g.add(this.element.textContent,e.text,t,e.subId),e.editorMeta)if(this.parentElement&&"SPAN"===this.parentElement.tagName&&"1"===this.parentElement.getAttribute("data-linguise-was-edit"))this.parentElement.setAttribute("data-editor","linguise"),this.parentElement.setAttribute("data-linguise-hash",e.editorMeta.hash),this.parentElement.setAttribute("data-linguise-editor-wrap","1"),this.parentElement.removeAttribute("data-linguise-was-edit"),this.element.textContent=e.text,this.bindEditor(this.parentElement);else{const t=document.createElement("span");t.textContent=e.text,t.setAttribute("data-editor","linguise"),t.setAttribute("data-linguise-hash",e.editorMeta.hash),t.setAttribute("data-linguise-editor-wrap","1"),this.bindEditor(t),this.element.replaceWith(t)}else this.element.textContent=e.text;else if(this.element.childNodes[e.index])if(i.dryRun){const t=this.element.childNodes[e.index].textContent.match(/\s*$/)[0];this.element.childNodes[e.index].textContent=e.text+" (translated)"+t}else{i.skipCache||g.add(this.element.childNodes[e.index].textContent,e.text,t,e.subId);const n=this.element.childNodes[e.index];if(e.editorMeta){const t=document.createElement("span");t.textContent=e.text,t.setAttribute("data-editor","linguise"),t.setAttribute("data-linguise-hash",e.editorMeta.hash),t.setAttribute("data-linguise-editor-wrap","1"),this.bindEditor(t),n.replaceWith(t)}else n.textContent=e.text}}isElementModified(e=null){const t=this.tokenize(),n=this.tokenize(!0);if("number"==typeof e){const i=t.find((t=>t.index===e)),s=n.find((t=>t.index===e));if(!i||!s)return!0;if(i.text!==s.text)return!0;for(const e in i.metaExtra)if(i.metaExtra[e]!==s.metaExtra[e])return!0;return!1}if(t.length!==n.length)return!0;t.sort(((e,t)=>e.index-t.index)),n.sort(((e,t)=>e.index-t.index));for(let e=0;e<t.length;e++){const i=t[e],s=n[e];if(i.text!==s.text)return!0;for(const e in i.metaExtra)if(i.metaExtra[e]!==s.metaExtra[e])return!0}return!1}blurParent(){this.parentElement&&!this._blurred&&(this.parentElement.setAttribute("data-linguise-loading","1"),this._blurred=!0)}unblurParent(){this.parentElement&&(this.parentElement.removeAttribute("data-linguise-loading"),this._blurred=!1)}};const m=class extends _{constructor(e,t){super(e,e),this.tagWrapper="a"}shouldWeTranslate(e){const t=e.trim(),n=["http:","https:","mailto:","tel:","ftp:"];try{const e=new URL(t,window.location.href);if(!n.includes(e.protocol))return!1;const i=new URL(window.location.href);return i.protocol!==e.protocol||i.origin!==e.origin||i.pathname!==e.pathname||i.search!==e.search||i.hash===e.hash}catch(e){return!1}return super.shouldWeTranslate(e)}tokenize(e=!1){if(void 0!==this._cachedTokenized&&!e)return this._cachedTokenized;const t=this.element.getAttribute("href"),n=[];if(t&&this.shouldWeTranslate(t)){const e=new p(this,0,"",{href:t});e.subId="href",n.push(e)}if(!n.length)throw new Error("No attribute to translate in link element");return e||(this._cachedTokenized=n),n}applyChange(e,t,n){const i=Object.assign({},{dryRun:!1,skipCache:!1},n||{});i.skipCache||this.cachedIndex.push(e.index);const s=e.subId;if(!s)return;if(!e.metaExtra)return;let a=e.metaExtra.href;this.applyAttributeChange("href",a,{...i,language:t,subId:s}),this.attachEditor(e)}blurParent(){}unblurParent(){}};const b=class extends _{constructor(e,t){super(e,e),this.mergeable=!1}shouldWeTranslate(e){return!e.trim().startsWith("data:image")&&super.shouldWeTranslate(e)}tokenize(e=!1){if(void 0!==this._cachedTokenized&&!e)return this._cachedTokenized;const t=this.element.getAttribute("src"),n=this.element.getAttribute("alt"),i=this.element.getAttribute("title");if(t){const s={};if(this.shouldWeTranslate(t)&&(s.src=t),n&&this.shouldWeTranslate(n)&&(s.alt=n),i&&this.shouldWeTranslate(i)&&(s.title=i),!Object.keys(s).length)throw new Error("No attribute to translate in image element");const a=new p(this,0,"",s);return a.subId="merged-src",a.tagName="img",e||(this._cachedTokenized=[a]),[a]}if(n||i){const t=[];if(n&&this.shouldWeTranslate(n)){const e=new p(this,0,n);e.subId="alt",t.push(e)}if(i&&this.shouldWeTranslate(i)){const e=new p(this,1,i);e.subId="title",t.push(e)}if(!t.length)throw new Error("No attribute to translate in image element");return e||(this._cachedTokenized=t),t}throw new Error("No attribute to translate in image element")}applyChange(e,t,n){const i=Object.assign({},{dryRun:!1,skipCache:!1},n||{});i.skipCache||this.cachedIndex.push(e.index);const s=e.subId;if(!s)return;let a=e.text;if("merged-src"===s){if(a=e.metaExtra.src,!a)return;const n=this.element.getAttribute("src");i.dryRun&&(a=`${n}#linguise-translated-demo`),this.element.setAttribute("src",a),i.skipCache||i.dryRun||g.add(n,a,t,s);const r=e.metaExtra.alt;r&&this.applyAttributeChange("alt",r,{...i,language:t,subId:s});const o=e.metaExtra.title;return o&&this.applyAttributeChange("title",o,{...i,language:t,subId:s}),void this.attachEditor(e)}"alt"===s&&(this.applyAttributeChange("alt",a,{...i,language:t}),e.editorMeta&&e.editorMeta.altHash&&this.element.setAttribute("data-linguise-alt-hash",e.editorMeta.altHash)),"title"===s&&this.applyAttributeChange("title",a,{...i,language:t})}blurParent(){}unblurParent(){}};var y="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>(new TextEncoder).encode(e);function w(e){return e instanceof Uint8Array?e:"string"==typeof e?y(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function E(e){return"string"==typeof e?0===e.length:0===e.byteLength}var v={name:"SHA-256"},T={name:"HMAC",hash:v},x=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const L={};function A(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:L}var N=function(){function e(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return e.prototype.update=function(e){if(!E(e)){var t=w(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return A().crypto.subtle.sign(T,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):E(this.toHash)?Promise.resolve(x):Promise.resolve().then((function(){return A().crypto.subtle.digest(v,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&void 0!==this.secret&&(this.key=new Promise((function(t,n){A().crypto.subtle.importKey("raw",w(e.secret),T,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))},e}();function k(e,t,n,i){return new(n||(n=Promise))((function(s,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((i=i.apply(e,t||[])).next())}))}function C(e,t){var n,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=o(0),r.throw=o(1),r.return=o(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(l){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(a=0)),a;)try{if(n=1,i&&(s=2&o[0]?i.return:o[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;switch(i=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var S=64,M=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),I=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],P=Math.pow(2,53)-1,O=function(){function e(){this.state=Int32Array.from(I),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>P)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===S&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%S>=56){for(var i=this.bufferLength;i<S;i++)t.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(i=this.bufferLength;i<56;i++)t.setUint8(i,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}var s=new Uint8Array(32);for(i=0;i<8;i++)s[4*i]=this.state[i]>>>24&255,s[4*i+1]=this.state[i]>>>16&255,s[4*i+2]=this.state[i]>>>8&255,s[4*i+3]=this.state[i]>>>0&255;return s},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],i=t[1],s=t[2],a=t[3],r=t[4],o=t[5],l=t[6],u=t[7],c=0;c<S;c++){if(c<16)this.temp[c]=(255&e[4*c])<<24|(255&e[4*c+1])<<16|(255&e[4*c+2])<<8|255&e[4*c+3];else{var h=this.temp[c-2],d=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,g=((h=this.temp[c-15])>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[c]=(d+this.temp[c-7]|0)+(g+this.temp[c-16]|0)}var f=(((r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7))+(r&o^~r&l)|0)+(u+(M[c]+this.temp[c]|0)|0)|0,p=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&i^n&s^i&s)|0;u=l,l=o,o=r,r=a+f|0,a=s,s=i,i=n,n=f+p|0}t[0]+=n,t[1]+=i,t[2]+=s,t[3]+=a,t[4]+=r,t[5]+=o,t[6]+=l,t[7]+=u},e}(),U=function(){function e(e){this.secret=e,this.hash=new O,this.reset()}return e.prototype.update=function(e){if(!E(e)&&!this.error)try{this.hash.update(w(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return k(this,void 0,void 0,(function(){return C(this,(function(e){return[2,this.digestSync()]}))}))},e.prototype.reset=function(){if(this.hash=new O,this.secret){this.outer=new O;var e=function(e){var t=w(e);if(t.byteLength>S){var n=new O;n.update(t),t=n.digest()}var i=new Uint8Array(S);return i.set(t),i}(this.secret),t=new Uint8Array(S);t.set(e);for(var n=0;n<S;n++)e[n]^=54,t[n]^=92;this.hash.update(e),this.outer.update(t);for(n=0;n<e.byteLength;n++)e[n]=0}},e}();var R=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function D(e){return e&&R.every((function(t){return"function"==typeof e[t]}))}var $=function(){function e(e){!function(e){return!(!function(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}(e)||"object"!=typeof e.crypto.subtle)&&D(e.crypto.subtle)}(A())?this.hash=new U(e):this.hash=new N(e)}return e.prototype.update=function(e,t){this.hash.update(w(e))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}(),F=s(735),j=s.n(F);const q=new class{getLanguageUrl(e,t){return this.isDemoMode(e)?"#":e.is_joomla?this.fixTrailingSlashes(e,this.getJoomlaLanguageUrl(t,e)):e.is_wp?this.fixTrailingSlashes(e,this.getWpLanguageUrl(t,e)):this.fixTrailingSlashes(e,this.getOtherCMSUrl(e,t))}getOtherCMSUrl(e,t){return"subdomains"===e.domain_structure?this.getUrlForSubDomains(e,t):this.getUrlForSubFolders(e,t)}getWpLanguageUrl(e,t){const n=document.querySelector('link[rel="alternate"][hreflang="'+e+'"]');return null!==n&&void 0!==n.href?n.href:t.scheme+"//"+t.host+(t.base?t.base:"")+(e===t.default_language?"":"/"+e)+t.original_path+t.trailing_slashes+(t.search?t.search:"")}getJoomlaLanguageUrl(e,t){const n=document.querySelector('link[rel="alternate"][hreflang="'+e+'"]');if(null!==n&&void 0!==n.href)return n.href;return-1!==(t.linguise_configs?.joomla_languages||[]).indexOf(e)&&e!==t.default_language?`${t.scheme}//${t.host+(t.base?t.base:"")+"/"+e+t.trailing_slashes}`:`${t.scheme}//${t.host+(t.base?t.base:"")+(e===t.default_language?"":"/"+e)+t.original_path+t.trailing_slashes+(t.search?t.search:"")}`}fixTrailingSlashes(e,t){const n=new URL(t);return"/"===n.pathname||(n.pathname=n.pathname.replace(/\/+$/,""),n.pathname=n.pathname+e.trailing_slashes),n.toString()}getUrlForSubFolders(e,t){return e.url_translations&&void 0!==e.url_translations[t]?e.domain+(t===e.default_language?"":"/"+t)+e.url_translations[t]:e.url_translations&&void 0!==e.url_translations[e.default_language]?e.domain+(t===e.default_language?"":"/"+t)+e.url_translations[e.default_language]:e.domain+(t===e.default_language?"":"/"+t)+e.path+e.search}getUrlForSubDomains(e,t){const n=e.domain,i=n.substring(0,n.indexOf("//")+2),s=e.available_languages.map((e=>e.code));let a=n.replace(new RegExp(`(https?://(?:${s.join("|")})\\.|https?://)`,""),"");return t!==e.default_language&&a.startsWith("www.")&&(a=a.substring(4)),e.url_translations&&void 0!==e.url_translations[t]?i+(t===e.default_language?"":t+".")+a+e.url_translations[t]:e.url_translations&&void 0!==e.url_translations[e.default_language]?i+(t===e.default_language?"":t+".")+a+e.url_translations[e.default_language]:i+(t===e.default_language?"":t+".")+a+e.path+e.search}sort(e){e.is_joomla||e.is_wp||e.available_languages.sort(((t,n)=>t.code===e.default_language?-1:n.code===e.default_language?1:t.original_name<n.original_name))}getFlagClass(e,t){return"en"===t&&"en-gb"===e?.flag_en_type?"en_gb":"de"===t&&"de-at"===e?.flag_de_type?"de_at":"es"===t&&"es-mx"===e?.flag_es_type?"es_mx":"es"===t&&"es-pu"===e?.flag_es_type?"es_pu":"pt"===t&&"pt-br"===e?.flag_pt_type?"pt_br":"zh-tw"===t&&"zh-cn"===e?.flag_tw_type?"zh-cn":t}renderFlag(e,t){if(e){const{enabled_flag:n,flag_width:i,flag_shape:s,flag_border_radius:a}=e;return n?`<span \n                        class="linguise_flags linguise_flag_${this.getFlagClass(e,t)} linguise_language_icon" \n                        style="width: ${i+"px"}; \n                               height: ${("rectangular"===s?i/1.7:i)+"px"}; \n                               border-radius: ${"rectangular"===s?a+"px":"50%"};">         \n                    </span>`:""}return`<span class="linguise_flags linguise_flag_${this.getFlagClass(e,t)} linguise_language_icon" style="width: 24px; height: 24px; border-radius: 50%"></span>`}renderLanguageName(e,t,n,i,s=!1){return e?e.enabled_lang_short_name?`<span class="linguise_lang_name mr-10 ${s?"popup_linguise_lang_name":""}">${t.toUpperCase()}</span>`:e.enabled_lang_name?`<span class="linguise_lang_name mr-10 ${s?"popup_linguise_lang_name":""}">${"en"===e.lang_name_display?n:i}</span>`:"":`<span class="linguise_lang_name popup_linguise_lang_name">${i}</span>`}colorAndHoverLanguageName(e,t,n){const i=""+((e?.flag_shadow_h||2)+"px "+(e?.flag_shadow_v||2)+"px "+(e?.flag_shadow_blur||12)+"px "+(e?.flag_shadow_spread||0)+"px "+(e?.flag_shadow_color||"#eeeeee")),s=""+((e?.flag_hover_shadow_h||3)+"px "+(e?.flag_hover_shadow_v||3)+"px "+(e?.flag_hover_shadow_blur||6)+"px "+(e?.flag_hover_shadow_spread||0)+"px "+(e?.flag_hover_shadow_color||"#bfbfbf")),a=(e,t,n,i,s,a)=>{e.style.color=n||"#000000",t&&(t.style.boxShadow=s),e.parentNode.addEventListener("mouseover",(function(){e.style.color=i||"#000000",t&&(t.style.boxShadow=a)})),e.parentNode.addEventListener("mouseout",(function(){e.style.color=n||"#000000",t&&(t.style.boxShadow=s)}))};Array.from(t).forEach((function(t){const n=t.previousElementSibling;a(t,n,e?.language_name_color,e?.language_name_hover_color,i,s)})),Array.from(n).forEach((function(t){const n=t.previousElementSibling;a(t,n,e?.popup_language_name_color,e?.popup_language_name_hover_color,i,s)}))}languagePosition(e,t,n){const i=e.querySelector(".linguise_switcher"),s=e.querySelector(".linguise_switcher_sub");let a="";switch(n){case"top_left":case"top_left_no_scroll":a="position: fixed; top: 10px; left: 10px; z-index: 99999; background: #fff; border-radius: 0;";break;case"top_right":case"top_right_no_scroll":a="position: fixed; top: 10px; right: 10px;z-index: 99999; background: #fff; border-radius: 0;";break;case"bottom_left":case"bottom_left_no_scroll":a="position: fixed; bottom: 10px; left: 10px;z-index: 99999; background: #fff; border-radius: 0;","dropdown"===t&&s&&(s.style.cssText="top: unset; bottom: 100%");break;case"bottom_right":case"bottom_right_no_scroll":a="position: fixed; bottom: 10px; right: 10px;z-index: 99999; background: #fff; border-radius: 0;","dropdown"===t&&s&&(s.style.cssText="top: unset; bottom: 100%")}i&&(i.style.cssText=a,["top_left_no_scroll","top_right_no_scroll","bottom_left_no_scroll","bottom_right_no_scroll"].includes(n)&&(i.style.position="absolute"))}isAlreadyInjected(e){const t=e.innerHTML?.trim()||"",n=t.length>0&&"[linguise]"!==t;return"function"==typeof e.getAttribute&&"1"===e.getAttribute("data-flag-ready")&&n}replaceAndPaintElement(e,t,n){if(this.isAlreadyInjected(e))return;e.innerHTML="";const i=t.cloneNode(!0);i.dataset.flagReady="1",e.appendChild(i),e.setAttribute("data-flag-ready","1");const s=e.getElementsByClassName("linguise_lang_name"),a=e.getElementsByClassName("popup_linguise_lang_name");this.colorAndHoverLanguageName(n,s,a)}replaceLinguiseShortcodeToSwitcher(e,t,n){const i=this.isDemoMode(n),s=document.getElementById("dashboard-live-preview"),a=document.getElementsByClassName("linguise_switcher_root"),r=this.findElementWithShortcode("[linguise]");let o=!1;if(s)return void s.appendChild(t);r.length>0&&Array.from(r).forEach((e=>{this.replaceAndPaintElement(e,t,n.language_settings),o=!0})),a.length>0&&Array.from(a).forEach((s=>{const a=s.classList.contains("linguise_menu_root")||s.classList.contains("linguise_menu");this.replaceAndPaintElement(s,t,n.language_settings),a||i||this.languagePosition(s,n.language_settings?.display,e),o=!0}));const l=n.is_joomla||n.is_wp;if(!o||null!==e&&"no"!==e){if(l&&!n.cms_automatic_switcher)return;const s=document.createElement("div");s.className="linguise_switcher_wrapper",this.replaceAndPaintElement(s,t,n.language_settings),i||this.languagePosition(s,n.language_settings?.display,e),document.body.appendChild(s)}}findElementWithShortcode(e){const t=document.body.getElementsByTagName("*"),n=[];for(let i=0;i<t.length;i++)t[i].textContent?.trim()===e&&n.push(t[i]);return n}isDemoMode(e){return!!e.demo_mode||Boolean(document.getElementById("dashboard-live-preview"))}async tryGetLinguiseEditorCookie(){try{const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const n=e[t].split("=");if("linguiseEditorToken"===n[0].trim())return n[1]}}catch{if(window.cookieStore){const e=await window.cookieStore.get("linguiseEditorToken");return e?e.value:null}}return null}getOrderedLanguageList(e,t,n){if(!n)return e;const i=[...n];for(let t=0;t<e.length;t++){const s=e[t];n.includes(s.code)||i.push(s.code)}const s=[];for(let n=0;n<i.length;n++){const a=i[n];if(a===t)continue;const r=e.find((e=>e.code===a));r&&s.push(r)}const a=e.find((e=>e.code===t));return a&&s.unshift(a),s}};const B=new class{constructor(){if(this._cached_config=null,this._stored_pkey=null,this.linguiseFetch=window.fetch.bind(window),document.currentScript){const e=new URL(document.currentScript.src);this._stored_pkey=e.searchParams.get("d")}this._config_request=!1,"undefined"!=typeof originalFetch&&"function"==typeof originalFetch&&(this.linguiseFetch=originalFetch.bind(window))}setPublicKey(e){!e&&this._stored_pkey||(this._stored_pkey=e)}_waitUntilConfigUnlock(){return new Promise((e=>{const t=setInterval((()=>{this._config_request||(clearInterval(t),e())}),100)}))}getStoredMetadata(){const e=document.querySelector("script#linguise-extra-metadata");if(e){const t=JSON.parse(e.textContent);return t.url.startsWith("http")||(t.url=atob(t.url),t.domain=atob(t.domain)),t}}async getConfig(e){if(this._config_request&&await this._waitUntilConfigUnlock(),this._config_request=!0,null!==this._cached_config)return this._cached_config;const t=this.getStoredMetadata();if(t)return this._cached_config=t,this._stored_pkey=t.public_key,this._config_request=!1,t;if(!this._stored_pkey)throw new Error("Linguise: No available key can be used");try{const t=await this.callAPI("/config/"+this._stored_pkey+(e?"/"+e:""),{method:"GET",headers:{"Content-Type":"application/json"}});return this._cached_config=t,this._config_request=!1,t}catch(e){throw this._config_request=!1,e}}async getUrlTranslations(e,t){if(!this._stored_pkey)throw new Error("Linguise: No available key can be used");return await this.callAPI("/translations/url/"+this._stored_pkey+"/"+e+"/"+j().hash(decodeURI(t)),{method:"GET",headers:{"Content-Type":"application/json"}})}async callAPI(e,t={}){const n=new URL("http"+("1"==={}.API_USE_HTTPS?"s":"")+"://"+{}.API_DOMAIN+({}.API_DOMAIN_PORT?":"+{}.API_DOMAIN_PORT:"")+{}.API_BASE_PATH+e),i={};-1!==["POST","PUT"].indexOf(t.method)&&(i["Content-Type"]="application/json"),t={...t,referrerPolicy:"origin",headers:new Headers(i)};const s=await this.linguiseFetch(n,t),a=await s.json();if(!1===a.success)throw a;return a.data}getRequestedPath(e,t,n){const i=new URL(t);let s=new URL(e).pathname;if("/"===i.pathname&&s.startsWith(`/${n}`)){const e=s.replace(new RegExp(`^/${n}`),"");s=""===e.trim()||"/"===e.trim()?"/":e}else if("/"!==i.pathname){s=s.replace(i.pathname,"");const e=s.replace(new RegExp(`^/${n}`),"");s=""===e.trim()||"/"===e.trim()?"/":e}return s}async translate(e,t,n,i=null,s=!1){if(null===i&&(i=new URL("http"+("1"==={}.API_TRANSLATE_HTTPS?"s":"")+"://"+{}.API_TRANSLATE_HOST+({}.API_TRANSLATE_PORT?":"+{}.API_TRANSLATE_PORT:""))),!this._stored_pkey)throw new Error("Linguise: No available key can be used");const a=new FormData,r=new URL(window.location.href);if(a.append("version","2.3.0"),a.append("url",e),a.append("original_url",`${r.protocol}//${r.host}`),a.append("language",t),a.append("requested_path",this.getRequestedPath(window.location.href,e,t)),a.append("content",n),a.append("public_key",this._stored_pkey),a.append("response_code","200"),a.append("user_agent",navigator.userAgent),s){const e=await q.tryGetLinguiseEditorCookie();e&&a.append("editor_token",e)}const o=(new Date).getTime().toString(),l={Referer:window.location.href,"X-Linguise-Nonce":o,"X-Linguise-Key":this._stored_pkey,"X-Linguise-Language":t,"X-Linguise-Hash":await(async(e,t,n)=>{const i=new $;i.update(`${e}_${t}-${n}`);const s=await i.digest();return Array.from(s).map((e=>e.toString(16).padStart(2,"0"))).join("")})(this._stored_pkey,o,t)},u=await this.linguiseFetch(i,{method:"POST",body:a,headers:l}),c=await u.json();if(void 0!==c.response_code&&200!==c.response_code)throw new Error(c.message);return c}};const H=class extends _{constructor(e,t){super(e,e),this.mergeable=!1}tokenize(e=!1){if(void 0!==this._cachedTokenized&&!e)return this._cachedTokenized;const t=this.element.getAttribute("placeholder");if(t){const n=[];if(t&&this.shouldWeTranslate(t)){const e=new p(this,0,t);e.subId="placeholder",n.push(e)}if(!n.length)throw new Error("No attribute to translate in textarea/input element");return e||(this._cachedTokenized=n),n}throw new Error("No attribute to translate in textarea/input element")}applyChange(e,t,n){const i=Object.assign({},{dryRun:!1,skipCache:!1},n||{});i.skipCache||this.cachedIndex.push(e.index);const s=e.subId;if(!s)return;let a=e.text;"placeholder"===s&&this.applyAttributeChange("placeholder",a,{...i,language:t}),this.attachEditor(e)}blurParent(){}unblurParent(){}};var z=s(260),W=s.n(z);const X=class{constructor(e=[]){this.exclusion_rules=[],this.text_replacement_rules=[],this.text_ignore_rules=[],this.dynamic_content_rules=[],this.pause_dynamic_content_rules=[],e.forEach((e=>{if(e.apply_to_url&&e.apply_to_language)switch(e.type){case 1:this.text_ignore_rules.push(e.params);break;case 2:this.text_replacement_rules.push(e.params);break;case 3:this.exclusion_rules.push(e.params);break;case 4:this.pause_dynamic_content_rules.push(e.params);break;case 6:this.dynamic_content_rules.push(e.params)}}))}findMatchingSelector(e,t){if(!e)return null;if(!t||0===t.length)return null;for(const n of t){const t=document.querySelectorAll(n);if(0!==t.length)for(const n of Array.from(t))if(n.contains(e))return n}return null}shouldPauseDynamicContent(){return-1!==this.pause_dynamic_content_rules.findIndex((e=>!1===e.multilingual_url))}isElementRulesExcluded(e){return this.exclusion_rules.map((t=>{const n=t.element_selectors||[];return null!==this.findMatchingSelector(e,n)})).filter((e=>e)).length>0}isTextMatch(e,t,n,i=!1){if(!e)return!1;let s="gs";i&&(s+="i");const a="regex"===n?`(${t})`:`(${W()(t)})`;return new RegExp(a,s).test(e)}isElementHasAttributes(e,t){return!!e&&(!(!t||0===t.length)&&t.map((t=>e.hasAttribute(t))).filter((e=>e)).length>0)}attachTextRules(e){const t=e.tokenize().map((e=>e.text));this.text_ignore_rules.forEach((n=>{if(n.languages&&!n.languages.includes(this.current_language))return;if(n.text_ignore.map((e=>t.map((t=>this.isTextMatch(t,e.text_ignore,e.text_ignore_type,e.ignore_case))).filter((e=>e)).length>0)).filter((e=>e)).length>0){const t=this.findMatchingSelector(e.element,n.element_selectors||[]);t&&(e.extraMetadata.id=e.extraMetadata.id||t.id,e.extraMetadata.class=[...e.extraMetadata.class||[],...t.className.split(" ")],e.extraMetadata.dataset={...e.extraMetadata.dataset||{},...t.dataset})}})),this.text_replacement_rules.forEach((n=>{if(n.languages&&!n.languages.includes(this.current_language))return;if(n.text_replace.filter((e=>"original"===e.source_type)).map((e=>t.map((t=>this.isTextMatch(t,e.text_replace,e.text_replace_type,e.ignore_case))).filter((e=>e)).length>0)).filter((e=>e)).length>0){const t=this.findMatchingSelector(e.element,n.element_selectors||[]);t&&(e.extraMetadata.id=e.extraMetadata.id||t.id,e.extraMetadata.class=[...e.extraMetadata.class||[],...t.className.split(" ")],e.extraMetadata.dataset={...e.extraMetadata.dataset||{},...t.dataset})}}))}collectDynamicNodes(){const e=[];for(const n of this.dynamic_content_rules){const s=n.element_selectors||[];if(!s||0===s.length)continue;const a=s.map((e=>Array.from(document.querySelectorAll(e)))).reduce(((e,t)=>[...e,...t]),[]);if(0===a.length)continue;const r=new Set;for(const n of a){if(r.has(n))continue;r.add(n);const s=document.createTreeWalker(n,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,(e=>{if(!e.isConnected)return NodeFilter.FILTER_REJECT;if(e.nodeType===Node.COMMENT_NODE)return NodeFilter.FILTER_REJECT;if(e.nodeType===Node.ELEMENT_NODE&&this.isElementHasAttributes(e,i[e.nodeName.toUpperCase()]||[]))return NodeFilter.FILTER_SKIP;let n=e;return e.nodeType===Node.TEXT_NODE&&(n=e.parentElement),t.includes(e.nodeName.toUpperCase())||t.includes(n.nodeName.toUpperCase())?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}));for(;s.nextNode();)if(s.currentNode.nodeType===Node.TEXT_NODE){if(!s.currentNode.parentElement)continue;e.push([s.currentNode,s.currentNode.parentElement])}else e.push([s.currentNode,s.currentNode])}}return e}};let K=!1;const J={IMG:b,A:m,TEXTAREA:H,INPUT:H};const G=new Set;for(const e in i)i[e].forEach((e=>{G.add(e)}));const V={childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeFilter:[...G,"linguise-ignore"]};const Y=class{constructor(e,t=null){this.config={apiKey:void 0,debounceDelay:2500,cacheTTL:2592e5,debug:!1,forceDisable:!1,dryRun:!1,domainId:null,domainUrl:null,languageOverride:null,baseUrl:`${window.location.protocol}//${window.location.host}`,blurAnimation:!0,isWpBrickDetected:!1},this.debouncedProcessTranslation=function(e,t){let n=null,i=[];const s=()=>{n=null,K&&console.log("Linguise: Debounce is not called after timeout, executing with",i.length,"items"),e(i),i=[]};return e=>{K&&console.log("Linguise: Called debouncer with",e.length,"items"),i=[...i,...e],e.length>0&&(n&&clearTimeout(n),n=setTimeout(s,t))}}(this.processTranslation.bind(this),this.config.debounceDelay),this.debounceDequeLockedNode=r(this.dequeLockedNode.bind(this),500),this.config_ready=!1,this._queued_translations=[],this._locked_node=[],this._translate_endpoint=t;let n=document.documentElement.lang||"";n.includes("-")&&!n.startsWith("zh-")&&(n=n.split("-")[0]),n=n.toLowerCase(),this.current_language=null,this.current_document_language=n,this.observer=null,this.shadow_observers=new Map,this.rules=new X,this.temporary_excluded_nodes=[],this._config_fetch=e,this._linguise_editor=!1,"loading"===document.readyState?addEventListener("DOMContentLoaded",(()=>{this.initialize().then((()=>{this.wrapFetchConfig()})).catch((e=>{console.error("Linguise: Failed to initialize dynamic content",e),this.cancelProcess()}))})):this.initialize().then((()=>{this.wrapFetchConfig()})).catch((e=>{console.error("Linguise: Failed to initialize dynamic content",e),this.cancelProcess()}))}wrapFetchConfig(){"function"==typeof this._config_fetch&&this._config_fetch(this.config,(async e=>{const t=B.getStoredMetadata();if((e=Object.assign({},t||{},e)).debug&&(this.config.debug=!0),!e.dynamic_translations.enabled)return this.config.debug&&console.log("Linguise: Dynamic translation is disabled, cancelling"),void this.cancelProcess();if(!e.public_key)return this.config.debug&&console.log("Linguise: Public key is not set, cancelling"),void this.cancelProcess();this.config.debug&&console.log("Linguise: Config is ready, processing queued translations");let n=e.language;for(const t in e.languages)if(e.languages[t].code===this.current_document_language){n=this.current_document_language;break}if(this.config.languageOverride&&(n=this.config.languageOverride),e.language===n)return this.config.debug&&console.log("Linguise: Document language is the same as current language, cancelling"),void this.cancelProcess();this.current_language=n,this.config.apiKey=e.public_key,this.config.baseUrl=e.domain||e.url;const i=e.rules||[];if(this.rules=new X(i),this.rules.shouldPauseDynamicContent())return this.config.debug&&console.log("Linguise: Dynamic content disabled via URL exclusions rules"),void this.cancelProcess();if(B.setPublicKey(e.public_key),this.config_ready=!0,this.isWpBrickDetected=void 0!==window?.wpgb_settings,Array.isArray(e.cached_selectors)){const t=e.cached_selectors.map((e=>document.querySelector(e))).filter((e=>null!==e));this.temporary_excluded_nodes=t}this._queued_translations=this._queued_translations.filter((e=>this.isElementPreflightAllow(e.node,e.parentElement))),this._queued_translations.forEach((e=>{this.config.blurAnimation&&e.blurParent()}));const s=this.uniqueElementNode(this.rules.collectDynamicNodes()).filter((([e,t])=>this.isElementPreflightAllow(e,t))).map((([e,t])=>{const n=this.applyCacheOrTranslate(e,t);if(n)return n})).filter((e=>void 0!==e));s.forEach((e=>{e.blurParent(),e.detachEditor()})),this.debouncedProcessTranslation([...s,...this._queued_translations])})).catch((e=>{console.error("Linguise: Failed to fetch config",e),this.cancelProcess()}))}async _translate(e){if(this.config.dryRun)return[e,!0];const t=this.config.languageOverride||this.current_language;try{const n=`<div class="linguise-dynamic-wrapper">${e}</div>`;return[(await B.translate(this.config.baseUrl,t,n,this._translate_endpoint,this.setLinguiseEditorActiveStatus())).content,!0]}catch(t){return console.error("Linguise: Failed to translate content",t),[e,!1]}}async processTranslation(e){if(!this.config_ready)return this.config.debug&&console.log("Linguise: Config is not ready, queueing translations"),void this._queued_translations.push(...e);this.setLinguiseEditorActiveStatus(),e.forEach((e=>{try{this.rules.attachTextRules(e)}catch(e){this.config.debug&&console.warn("Linguise: Failed to attach text rules",e)}}));const t=e.map((e=>{try{return e.tokenize()}catch{return e.unblurParent(),[]}})).flat().filter((e=>!e.isCached())).map((e=>e.node)),n=function(e){const t=new Set,n=new Set;return e.filter((e=>{const n=t.has(e.id);return t.add(e.id),!n})).filter((e=>{const t=n.has(e.element);return n.add(e.element),!t}))}(t.filter((e=>e.element.isConnected)));e.forEach((e=>{e.blurParent()})),this.config.debug&&console.log("Linguise: Found uncached",n),this.config.debug&&console.debug("Linguise: Current translation queue:",e),this.config.debug&&console.debug("Linguise: Current uncached response:",t),this.config.debug&&console.debug("Linguise: Uncached disconnected:",t.filter((e=>!e.element.isConnected)));const i=function(e){const t=new Map,n=[];for(const i of e)i.element!==i.parentElement&&i.parentElement&&i.mergeable?t.has(i.parentElement)?t.get(i.parentElement).push(i):t.set(i.parentElement,[i]):n.push(i);const i=[];for(const[e,n]of t){if(1===n.length){i.push(n[0].asHtml());continue}const t=new Array(e.childNodes.length).fill(void 0);for(const i of n)for(let n=0;n<e.childNodes.length;n++)e.childNodes[n]===i.element&&(t[n]=i);const s=`<div data-linguise-parent="${a()}">`,r=t.filter((e=>void 0!==e)).map((e=>e.asHtml().replace("<div","<span").replace("</div>","</span>"))).join("");i.push(s+r+"</div>")}for(const e of n)i.push(e.asHtml());return i.join("")}(n);if(this.config.debug&&console.debug("Linguise: Translating",i),!i.length)return e.forEach((e=>{e.unblurParent()})),void(this.config.debug&&console.log("Linguise: Nothing to be translated to server"));this.config.debug&&console.log("Linguise: Sending translation to server...");const[s,r]=await this._translate(i);if(e.forEach((e=>{e.unblurParent()})),!s)return void(this.config.debug&&console.log("Linguise: Translation failed, cancelling"));this.config.debug&&console.log("  Linguise: Received translation from server...");const o=document.createElement("div");o.innerHTML=s,this.config.debug&&console.debug("   Linguise: Translated content",o),this.config.debug&&console.log("  Linguise: Updating DOM..."),o.querySelectorAll("[data-linguise-id]").forEach((t=>{const n=p.fromElement(t);if(!n)return;const i=e.find((e=>e.id===n.id));i&&(i.element.isConnected?i.isElementModified(n.index)?this.config.debug&&console.log("  Linguise: Element is changed, ignoring",i):(this.enqueLockedNode(i.element),i.applyChange(n,this.current_language,{dryRun:this.config.dryRun,skipCache:!r})):this.config.debug&&console.log("  Linguise: Element is not attached to DOM, ignoring"))}))}attachShadowObserver(e){if(this.shadow_observers.has(e))return;const t=new MutationObserver(((t,n)=>{this.observerCallback(t,n),e.isConnected||(this.config.debug&&console.log("Linguise: Disconnecting shadow observer from observer",e),n.disconnect(),this.shadow_observers.delete(e))}));this.config.debug&&console.log("Linguise: Attaching shadow observer",e),t.observe(e,V),this.shadow_observers.set(e,t)}collectChildNodes(e,t=[]){e.nodeType===Node.TEXT_NODE?t.push([e,e.parentElement]):("IMG"===e.nodeName&&(e.hasAttribute("src")||e.hasAttribute("alt")||e.hasAttribute("title"))||"A"===e.nodeName&&e.hasAttribute("href")||["TEXTAREA","INPUT"].includes(e.nodeName)&&e.hasAttribute("placeholder"))&&t.push([e,e]);for(let n=0;n<e.childNodes.length;n++)this.collectChildNodes(e.childNodes[n],t);return e.nodeType===Node.ELEMENT_NODE&&e.shadowRoot&&(this.attachShadowObserver(e.shadowRoot),this.collectChildNodes(e.shadowRoot,t)),t}uniqueElementNode(e){const t=new Set,n=[];for(const[i,s]of e)t.has(i)||(t.add(i),n.push([i,s]));return n}applyCacheOrTranslate(e,t){const n=function(e){const t=e.nodeName.toUpperCase();return J[t]||_}(e),i=new n(e,t);if(this._locked_node.includes(e))return void(this.config.debug&&console.debug("Linguise: Skipping locked node",i));let s=[];try{s=i.tokenize()}catch{return}if(this.setLinguiseEditorActiveStatus())return this.config.debug&&console.debug("Linguise: Linguise editor is active, skipping cache"),i;return s.map((e=>{if(this.isWpBrickDetected)return!1;const t=g.get(e.text,this.current_language||this.current_document_language,e.subId);if(t){const n=new p(null,e.index,t);return e.subId&&(n.subId=e.subId),this.enqueLockedNode(i.element),i.applyChange(n,this.current_language||this.current_document_language,{dryRun:this.config.dryRun}),!0}for(const[t,n]of Object.entries(e.metaExtra||{})){const s=g.get(n,this.current_language||this.current_document_language,e.subId);if(s){const n={};n[t]=s;const a=new p(null,e.index,e.text,n);return e.subId&&(a.subId=e.subId),this.enqueLockedNode(i.element),i.applyChange(a,this.current_language||this.current_document_language,{dryRun:this.config.dryRun}),!0}}return!1})).every((e=>e))?void 0:i}cancelProcess(){null!==this.observer&&this.observer.disconnect(),this._queued_translations.forEach((e=>{e.unblurParent()})),this.debounceDequeLockedNode()}extractScriptParam(){if(!document.currentScript)return{};const e=new URL(document.currentScript.src),t=e.searchParams.get("d"),n=e.searchParams.get("i"),i={};return t&&(i.apiKey=t),n&&(i.domainId=n),i}isLinguiseRelated(e){if(!e)return!1;if("BODY"===e.nodeName)return!1;if(e.nodeType===Node.ELEMENT_NODE){if(e.id&&(e.id.startsWith("linguise_")||e.id.startsWith("linguise-")))return!0;if("string"==typeof e.className&&(e.className.includes("linguise_")||e.className.includes("linguise-")))return!0}return this.isLinguiseRelated(e.parentNode)}setLinguiseEditorActiveStatus(){if(this._linguise_editor)return!0;if(document.querySelector("link#linguise_editor_style"))return this._linguise_editor=!0,!0;return!!document.querySelector("div#linguise_editor_toolbar")&&(this._linguise_editor=!0,!0)}dequeLockedNode(){this.temporary_excluded_nodes=this.temporary_excluded_nodes.filter((e=>!this._locked_node.includes(e))),this.config.debug&&console.log("Linguise: Dequeue-ing locked node",this._locked_node.length),this.config.debug&&console.debug("Linguise: Locked node removal",this._locked_node),this._locked_node=[]}enqueLockedNode(e){this._locked_node.push(e),this.debounceDequeLockedNode()}isShadowRoot(e){return!!e&&(e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host)}isIgnoredAttribute(e){const t=["linguise-ignore","data-linguise-loading","data-linguise-editor-active","data-linguise-editor-wrap"];return"function"==typeof e.hasAttribute?t.map((t=>e.hasAttribute(t))).some((e=>e)):"function"==typeof e.getAttribute&&"no"===e.getAttribute("translate")?.toLowerCase()}isElementPreflightAllow(e,i){const s=this.isShadowRoot(e)?e.host:e;if(!s.isConnected)return!1;if(s.nodeType===Node.COMMENT_NODE)return!1;if(this.isLinguiseRelated(s))return!1;const a=this.isShadowRoot(i)?i.host:i;if(s.nodeType!==Node.TEXT_NODE&&t.includes(s.nodeName.toUpperCase()))return!1;if(s.nodeType===Node.TEXT_NODE&&a&&n.includes(a.nodeName.toUpperCase()))return!1;if(s.nodeType===Node.ELEMENT_NODE&&this.isIgnoredAttribute(s)||this.isIgnoredAttribute(a))return!1;if(this.rules.isElementRulesExcluded(s))return!1;for(const e of this.temporary_excluded_nodes){if(e===s||a&&e===a)return this.enqueLockedNode(e),!1;if(e.contains(s))return this.enqueLockedNode(e),!1}return!0}observerCallback(e,t){const n=[];e.forEach((e=>{const t=e.target;let s=e.target;if(t.nodeType===Node.TEXT_NODE&&(s=t.parentElement),"attributes"===e.type&&t.nodeType===Node.ELEMENT_NODE){if(!this.isElementPreflightAllow(t,s))return;if((i[t.nodeName.toUpperCase()]||[]).includes(e.attributeName)){const e=this.applyCacheOrTranslate(t,s);e&&n.push(e)}}else if("childList"===e.type&&e.addedNodes.length>0){const t=[];e.addedNodes.forEach((e=>{const n=this.uniqueElementNode(this.collectChildNodes(e));t.push(...n)}));const i=this.uniqueElementNode(t).filter((([e,t])=>this.isElementPreflightAllow(e,t)));if(i.length>0){const e=i.map((([e,t])=>this.applyCacheOrTranslate(e,t))).filter((e=>!!e));e.forEach((e=>{this.config_ready&&this.config.blurAnimation&&e.blurParent()})),n.push(...e)}}else if("characterData"===e.type&&t.nodeType===Node.TEXT_NODE){if(!this.isElementPreflightAllow(t,s))return;const e=this.applyCacheOrTranslate(t,s);e&&(this.config_ready&&e.blurParent(),n.push(e))}})),n.length&&(this.config_ready&&n.forEach((e=>e.detachEditor())),this.debouncedProcessTranslation(n))}async collectShadowNodes(){const e=document.createTreeWalker(document.body,NodeFilter.SHOW_ELEMENT,(e=>e.isConnected?e.shadowRoot?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP:NodeFilter.FILTER_REJECT)),t=[];for(;e.nextNode();)t.push(e.currentNode);return t}async initialize(){if(void 0===window)throw new Error("Linguise: please run this on browser");document.getElementById("linguise-dynamic-content-style")&&document.getElementById("linguise-dynamic-content-style").remove();const e=document.createElement("style");e.id="linguise-dynamic-content-style",e.innerHTML="\n[data-linguise-loading] {\n    text-shadow: 0 0 6px #8f8f8f;\n    transition: text-shadow 0.3s ease-in-out;\n    color: transparent !important;\n    animation: linguise-loading-pulse 1.5s ease-in-out infinite;\n}\n\n@keyframes linguise-loading-pulse {\n    0% {\n        text-shadow: 0 0 6px #8f8f8f;\n    }\n    50% {\n        text-shadow: 0 0 10px #8f8f8f;\n    }\n    100% {\n        text-shadow: 0 0 6px #8f8f8f;\n    }\n}\n",document.head.appendChild(e);const t=this.extractScriptParam(),n=Object.assign({},this.config,t,window.lingConfig||{});if(!window.document.documentElement.lang)throw new Error("Linguise: document.lang is not set, disabling dynamic content");if(!this._config_fetch)throw new Error("Linguise: configFetch is not set, disabling dynamic content");if(this.config=n,this.config.forceDisable)return void(this.config.debug&&console.log("Linguise: forceDisable is set, disabling dynamic content"));K=this.config.debug,g.importFromStorage(),g.setMaxTTL(this.config.cacheTTL),null!==this.observer&&this.observer.disconnect(),this.observer=new MutationObserver(((e,t)=>{this.observerCallback(e,t)})),this.config.debug&&console.log("Linguise: Attaching all shadow DOM observers");(await this.collectShadowNodes()).forEach((e=>{e.shadowRoot&&this.attachShadowObserver(e.shadowRoot)})),this.config.debug&&console.log("Linguise: Starting observer",n),this.observer.observe(document.body,V)}};const Z=class{constructor(){this.initalized=!1,this.opened=!1,s.e(541).then(s.bind(s,761))}load(e){const t=e.available_languages.find((t=>t.code===e.current_language)),n=e.language_settings,i=document.createElement("div");return i.id="linguise_floating_wrapper",i.innerHTML=`<div class="linguise_switcher ${"rectangular"===n?.flag_shape?"linguise_flag_rectangular":"linguise_flag_rounded"}">\n                            <a href="#" class="linguise_switcher_popup" data-linguise-switcher="floating">\n                                ${q.renderFlag(n,t.code)}\n                                ${q.renderLanguageName(n,t.code,t.name,t.original_name)}\n                            </a>\n                          </div>`,q.replaceLinguiseShortcodeToSwitcher(n?.position,i,e),this.postLoad(e),i}postLoad(e){document.querySelectorAll('[data-linguise-switcher="floating"]').forEach((t=>{t.__linguise_click_handled||(t.addEventListener("click",(t=>{t.preventDefault(),this.click(e.language_settings,e)})),t.__linguise_click_handled=!0)}))}click(e,t){if(!document.getElementById("dashboard-live-preview")){if(!0===this.initalized)return void this.switch();this.initalized=!0}q.sort(t);const n=e&&Object.keys(e).length>0?e:t.language_settings,i=q.getOrderedLanguageList(t.available_languages,t.default_language,n?.language_flag_order),s=document.createElement("div");s.innerHTML=`\n            <a class="close" href="#"><span></span></a>\n            <ul>\n                ${i.map((e=>`\n                            <li class="${t.default_language===e.code?"current":""}">\n                                <a href="${q.getLanguageUrl(t,e.code)}">\n                                   ${q.renderFlag(n,e.code)}\n                                   ${q.renderLanguageName(n,e.code,e.name,e.original_name,!0)}\n                                </a>\n                            </li>`)).join("")}\n            </ul>\n`,s.id="linguise_popup",s.className="linguise_switcher "+("rectangular"===n?.flag_shape?"linguise_flag_rectangular":"linguise_flag_rounded");const a=s.querySelector("ul");if(a){if(n?.pre_text){const e=document.createElement("p");e.classList.add("linguise_pre_text"),e.innerHTML=n.pre_text,a.parentNode.insertBefore(e,a)}if(n?.post_text){const e=document.createElement("p");e.classList.add("linguise_post_text"),e.innerHTML=n.post_text,a.parentNode.appendChild(e)}}const r=document.createElement("div");r.id="linguise_popup_container",r.appendChild(s),document.body.appendChild(r),setTimeout((function(){r.classList.add("show_linguise_popup_container")}),100);const o=document.createElement("div");o.id="linguise_background",document.body.appendChild(o);const l=document.getElementsByClassName("popup_linguise_lang_name");q.colorAndHoverLanguageName(n,[],l),document.querySelectorAll("#linguise_background, #linguise_popup .close").forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),this.switch()})))),this.opened=!0}switch(){document.getElementById("dashboard-live-preview")?(document.getElementById("linguise_background").remove(),document.getElementById("linguise_popup_container").classList.remove("show_linguise_popup_container"),setTimeout((()=>{document.getElementById("linguise_popup_container").remove()}),100),this.opened=!1):(document.getElementById("linguise_background").style.display=this.opened?"none":"",document.querySelector("#linguise_popup_container").classList.toggle("show_linguise_popup_container"),this.opened=!this.opened)}};const Q=class{constructor(e){s.e(541).then(s.bind(s,56))}load(e){const t=e.available_languages.find((t=>t.code===e.current_language));q.sort(e);const n=e.language_settings,i=q.getOrderedLanguageList(e.available_languages,e.default_language,n?.language_flag_order),s=document.createElement("div");return s.innerHTML=`\n            <ul class="linguise_switcher linguise_switcher_dropdown ${"rectangular"===n?.flag_shape?"linguise_flag_rectangular":"linguise_flag_rounded"}">\n                <li class="linguise_current">\n                    <div class="linguise_current_lang">\n                        ${q.renderFlag(n,e.current_language)}\n                        ${q.renderLanguageName(n,e.current_language,t.name,t.original_name)}\n                        <span class="lccaret top">\n                            <svg height="48" viewBox="0 96 960 960" width="48">\n                                <path d="M480 699q-6 0-11-2t-10-7L261 492q-8-8-7.5-21.5T262 449q10-10 21.5-8.5T304 450l176 176 176-176q8-8 21.5-9t21.5 9q10 8 8.5 21t-9.5 22L501 690q-5 5-10 7t-11 2Z"/>\n                            </svg>\n                        </span>\n                    </div>\n                    <ul class="linguise_switcher_sub linguise_switcher_un_mm ${e.available_languages.length>9?"many_languages":""}">\n                        ${i.map((t=>{if(t.code!==e.current_language)return`<a href="${q.getLanguageUrl(e,t.code)}">\n                                            <li class="linguise_lang_item" data-lang="${t.code}" id="linguise_lang_item">\n                                                ${q.renderFlag(n,t.code)}\n                                                ${q.renderLanguageName(n,t.code,t.name,t.original_name,!0)}\n                                            </li>\n                                        </a>`})).join("")}\n                    </ul>\n                </li>\n            </ul>`,s.id="dropdown",q.replaceLinguiseShortcodeToSwitcher(n?.position,s,e),this.postLoad(e),s}postLoad(e){const t="linguise_switcher_sub linguise_switcher_un_mm "+(e.available_languages.length>9?"many_languages":""),n=document.querySelectorAll(".linguise_switcher_un_mm");Array.from(n).forEach((e=>{if(e.__observer)return;const n=new MutationObserver((i=>{i.forEach((i=>{if("attributes"===i.type&&"class"===i.attributeName){[e.classList.contains("linguise_switcher_un_mm"),e.classList.contains("linguise_switcher_sub"),e.classList.contains("many_languages")].filter(Boolean).length.length!==e.classList.length&&(e.className=t,n.disconnect(),e.__observer=null)}}))}));e.__observer=n,n.observe(e,{attributes:!0,attributeFilter:["class"]})}))}};const ee=class{constructor(){s.e(541).then(s.bind(s,452))}load(e){q.sort(e);const t=e.language_settings,n=q.getOrderedLanguageList(e.available_languages,e.default_language,t?.language_flag_order),i=document.createElement("div");return i.innerHTML=`\n            <div class="linguise_switcher side_by_side_lang_list ${"rectangular"===t?.flag_shape?"linguise_flag_rectangular":"linguise_flag_rounded"}">\n                ${n.map((n=>`<a href="${q.getLanguageUrl(e,n.code)}">\n                                ${q.renderFlag(t,n.code)}\n                                ${q.renderLanguageName(t,n.code,n.name,n.original_name)}\n                            </a>`)).join("")}\n            </div>`,i.id="side_by_side",q.replaceLinguiseShortcodeToSwitcher(t?.position,i,e),i}postLoad(){}};const te=class{constructor(e){this.domain=null,this.base_url=null,this.domain_id=null,this.current_language=null,this.default_language=null,this.translate_urls=null,this.available_languages=[],this.scheme=null,this.host=null,this.original_path="",this.alternate_link_injected=!1,this.cms_automatic_switcher=!1,this.path=null,this.trailing_slashes="",this.search=null,this.url_translations={},this.language_settings={},this.domain_structure=null,this.linguise_configs={},this.demo_mode=!1,this._current_script=e}async initialize(){if(this.setConfigs(),0===Object.keys(this.linguise_configs).length&&!await this.getDomainConfig())return;const e=this.getCurrentLanguage();if("/"!==this.getPath()&&this.translate_urls&&(this.url_translations=await B.getUrlTranslations(e,this.getPath())),this.addAlternates(),this.addFlag(),"shopify"===this.platform&&!this.pathShopifyCookies()){const e=setInterval((()=>{this.pathShopifyCookies()&&clearInterval(e)}),1e3)}}pathShopifyCookies(){const e=document.cookie.split(";");for(let t=0;t<e.length;t++){const n=e[t].trim();if(n.startsWith("cart=")){const e="cart="+n.substring(5)+";domain=."+this.domain.split("//",2)[1]+";path=/";return document.cookie=e,!0}}return!1}getCurrentLanguage(){if(null!==this.current_language)return this.current_language;let e=this.default_language;for(const t in this.available_languages)if(this.available_languages[t].code===document.documentElement.lang){e=document.documentElement.lang;break}return this.current_language=e,this.current_language}async getDomainConfig(){const e=await B.getConfig(this.domain_id);return!!e&&(this.base_url=e.url,this.domain=e.domain,this.available_languages=e.languages,this.default_language=e.language,this.translate_urls=!!e.translate_urls,this.language_settings=e.language_settings,this.domain_structure=e.structure,!0)}addFlag(e={}){switch(Object.keys(e).length>0&&(this.language_settings=e),this.language_settings?.display){case"dropdown":{const e=new Q;this._switcher=e,this._switcher_element=e.load(this),e.postLoad(this);break}case"popup":{const e=new Z;this._switcher=e,this._switcher_element=e.load(this),e.postLoad(this);break}case"side_by_side":{const e=new ee;this._switcher=e,this._switcher_element=e.load(this);break}default:{const e=new Z;this._switcher=e,this._switcher_element=e.load(this);break}}this._switcher.postLoad(this),this.monitorDOM(),s.e(541).then(s.bind(s,907))}addAlternates(){this.alternate_link_injected||(this.available_languages.forEach((e=>{this.injectAlternate(e.code)})),this.injectAlternate("x-default"))}injectAlternate(e){const t=document.createElement("link");t.rel="alternate",t.hreflang=e,"x-default"===e||e===this.default_language?t.href=q.fixTrailingSlashes(this,this.base_url):t.href=q.getLanguageUrl(this,e),document.head.appendChild(t)}getPath(){if(null!==this.path)return this.path;if(this.demo_mode)return this.path="/",this.trailing_slashes="",this.search="",this.path;const e=new URL(this.domain);this.path=document.location.pathname.replace(/\/+$/,""),this.trailing_slashes=document.location.pathname.endsWith("/")?"/":"",this.search=document.location.search,"/"!==e.pathname&&(this.path=this.path.substring(e.pathname.length)),this.scheme=e.protocol,this.host=e.host;for(let e=0;e<this.available_languages.length;e++){const t=new RegExp("^/(?:"+this.available_languages[e].code+")($|/.*)").exec(this.path);if(t){this.path=t[1];break}}return""===this.path&&(this.path="/"),this.path}setConfigs(){if(this.is_joomla=!("undefined"==typeof linguise_configs||!linguise_configs.vars.configs.joomla_languages),this.is_wp=!("undefined"==typeof linguise_configs||linguise_configs.vars.configs.joomla_languages),this.is_joomla)return this.setJoomlaLinguiseConfig();if(this.is_wp)return this.setWPLinguiseConfig();const e=this._current_script||document.currentScript;if(e){const t=new URL(e.src),n=t.searchParams.get("d"),i=t.searchParams.get("i");if(!n&&!B._stored_pkey)return;B.setPublicKey(n),this.domain_id=i||null}}getCurrentLocation(){const e=new URL(window.location.href),t=e.pathname.endsWith("/")?"/":"";return`${e.protocol}//${e.host}${t}`}setJoomlaLinguiseConfig(){const{flag_display_type:e,language_default:t,display_position:n,languages:i,base_url:s,enable_language_name:a,enable_flag:r,enable_language_short_name:o,language_name_display:l,alternate_link:u,original_path:c,automatic_switcher:h}=linguise_configs.vars.configs;this.domain=s||this.getCurrentLocation(),this.base_url=s||this.getCurrentLocation(),this.linguise_configs=linguise_configs.vars.configs,this.available_languages=Object.keys(i).map((e=>({code:e,name:i[e],original_name:i[e]}))),this.default_language=t,this.alternate_link_injected=Boolean(u),this.cms_automatic_switcher=Boolean(h),this.original_path=c,this.language_settings={display:e,position:n,enabled_lang_name:parseInt(a),enabled_lang_short_name:parseInt(o),enabled_flag:parseInt(r),lang_name_display:l,...this.linguise_configs}}setWPLinguiseConfig(){const{flag_display_type:e,default_language:t,display_position:n,languages:i,base_url:s,demo_mode:a,enable_language_short_name:r,enable_language_name:o,enable_flag:l,language_name_display:u,alternate_link:c,original_path:h,add_flag_automatically:d}=linguise_configs.vars.configs,g=this.getCurrentLocation();a?(this.base_url=g,this.domain=g):(this.base_url=s||g,this.domain=s||g),this.demo_mode=Boolean(a),this.linguise_configs=linguise_configs.vars.configs,this.available_languages=Object.keys(i).map((e=>({code:e,name:i[e],original_name:i[e]}))),this.default_language=t,this.original_path=h,this.alternate_link_injected=Boolean(c),this.cms_automatic_switcher=Boolean(d),this.language_settings={display:e,position:n,enabled_lang_short_name:r,enabled_lang_name:o,enabled_flag:l,lang_name_display:u,...this.linguise_configs}}_uniqueElementNode(e){const t=new Set,n=[];for(const i of e)t.has(i)||(t.add(i),n.push(i));return n}_findLinguiseSwitcherRoot(e){const t=[];if(e.nodeType===Node.ELEMENT_NODE){let n=!1;if(e.classList&&e.classList.contains("linguise_switcher_root")?(t.push(e),n=!0):"[linguise]"===e.textContent?.trim()&&(e.__linguise_in_place=!0,t.push(e),n=!0),!n)for(let n=0;n<e.children?.length;n++)t.push(...this._findLinguiseSwitcherRoot(e.children[n]))}return t}monitorDOM(){new MutationObserver((e=>{e.forEach((e=>{let t=!1;if("childList"===e.type){e.addedNodes.forEach((e=>{if(!e.isConnected)return;const n=this._uniqueElementNode(this._findLinguiseSwitcherRoot(e));if(n.length>0&&this._switcher&&this._switcher_element){const i=this.language_settings;n.forEach((n=>{const s=n.classList?.contains("linguise_menu_root")||e.classList?.contains("linguise_menu")||n?.__linguise_in_place;q.replaceAndPaintElement(n,this._switcher_element,i),s||this.demo_mode||q.languagePosition(n,i?.display,i?.position),t=!0}))}}));const n=e.target;if(n.nodeType===Node.ELEMENT_NODE&&this._switcher_element&&this._switcher){const e=this.language_settings;if(n.classList&&n.classList.contains("linguise_switcher_root")){const i=n.classList.contains("linguise_menu_root")||n.classList.contains("linguise_menu");q.replaceAndPaintElement(n,this._switcher_element,e),i||this.demo_mode||q.languagePosition(n,e?.display,e?.position),t=!0}else"[linguise]"===n.textContent?.trim()&&(q.replaceAndPaintElement(n,this._switcher_element,e),t=!0)}}t&&this._switcher&&this._switcher.postLoad(this)}))})).observe(document.body,{childList:!0,subtree:!0})}},ne=document.currentScript;async function ie(e,t){let n=e.apiKey;const i=document.currentScript||ne;if(i&&!n){n=new URL(i.src).searchParams.get("d")}if(!n&&!B._stored_pkey)throw new Error("Linguise: cannot retrieve domain configuration, disabling dynamic content");B.setPublicKey(n);const s=await B.getConfig();if(!s)throw new Error("Linguise: cannot retrieve domain configuration, disabling dynamic content");s.public_key=B._stored_pkey,t(s)}function se(){const e=function(){if(!window.linguise_configs)return;const e=window.linguise_configs.vars.configs;if(!e)return!1;const t=e.dynamic_translations,n=t?t.enabled:0,i=1===e.debug,s="string"==typeof n?"1"===n:1===n;if(!s)return!1;const a=t?t.public_key:"";return a?[async(t,n)=>{const r=[];for(const t in e.languages)r.push({code:t,name:e.languages[t]});n({public_key:a,dynamic_translations:{enabled:s},language:e.default_language||e.language_default,languages:r,debug:i,url:e.base_url})},e.translate_host]:(i&&console.warn("Linguise: No public key provided, dynamic translations are disabled."),!1)}();!1!==e&&(Array.isArray(e)&&2===e.length?new Y(e[0],e[1]):new Y(ie))}async function ae(e){const t=new te(e);let n=!0;if(e){const t=new URL(e.src);"1"===t.searchParams.get("hide")&&(n=!1),B.setPublicKey(t.searchParams.get("d"))}n&&await t.initialize()}"loading"!==document.readyState?(ae(ne),se()):document.addEventListener("DOMContentLoaded",(()=>{ae(ne),se()}))})()})();